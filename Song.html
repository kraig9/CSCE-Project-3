<!DOCTYPE html>
<html>
<head>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
<!-- This is a comment 
<div style="text-align:center;">
<img src="680d4985b1fccdf554ab887abb63a453.1000x1000x1.jpg" style ="height:300px; width:400px; text-align:center">
</div>
-->



<div style="text-align:center;">
<h1> Flashing Lights </h1>
</div>

<div style="text-align:center;">
<h6>Popularity</h6>
</div>

<div style="text-align:center; padding-left:20%">
<div style="width:75%; " class="progress">
    
  <div  class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
    
</div>
</div>


<div style="text-align:center;">
<div class="btn-group" role="group" aria-label="Basic example" style="text-align:center">
    <a href="Recommendations.html"><button type="button" id = "btn-search-btn" class="btn btn-secondary">Get Recommendations</button></a>
	<br>
	<br>
</div>
</div>
<div style="text-align:center;">
	<button type="button" id = "play_btn" class="btn btn-secondary">Show Video</button
<div id="results">
</div>
</div>
<br>
<br>

<div style="text-align:center;">
<div id="player" align="center"> </div>
</div>
<script src="https://apis.google.com/js/client.js"></script>


 <script language="javascript">
 
 var video_id;
 $(document).ready(function() {
    $('#play_btn').on('click', function(event) {
	
		$.ajax({
			type: 'GET',
			url: "https://www.googleapis.com/youtube/v3/search?q=flashinglights&videoEmbeddable=true&maxResults=2&type=video&key=AIzaSyAZTXsjpn0u4oMKU65t-92Nxt6vg3tQecc&part=snippet",
			dataType: "json",
			success: function(resultData) {
				video_id = resultData.items[0].id.videoId;
				console.log(video_id);
				//alert(resultData.items[0].id.videoId);
				
				var tag = document.createElement('script');

				tag.src = "https://www.youtube.com/iframe_api";
				var firstScriptTag = document.getElementsByTagName('script')[0];
				firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);	
				
			},
			
			error: function(){
				alert("Did not work");
				console.log("Error retrieving spotify API");
			}
			
			
		});

		//saveData.error(function() { alert("Something went wrong"); });
        
    });
 });
 
 
var player;
function onYouTubeIframeAPIReady() {
	player = new YT.Player('player', {
	height: '290',
	width: '540',
	videoId: video_id
	/*
	events: {
		'onReady': onPlayerReady,
		'onStateChange': onPlayerStateChange
	}
	*/
	
	});
}


function onPlayerReady(event) {
	event.target.playVideo();
}


var done = false;
function onPlayerStateChange(event) {
	if (event.data == YT.PlayerState.PLAYING && !done) {
		setTimeout(stopVideo, 60000);
		done = true;
	}
}

function stopVideo() {
	player.stopVideo();
}
console.log("here we are");
				
 /*
	$(function(){
		$("form").on("submit", function(e){
			e.preventDefault();
			var request = gapi.client.youtube.search.list({
				part: "snippet",
				type: "video",
				q: encodeURIComponent($("#search_vid").val()).replace(/%20/g, "+"),
				maxResults:1
			
			});
			request.execute(function(response) {
				console.log(response);
			});
		
		});
		
	});
	
	function init() {
		gapi.client.setApiKey("AIzaSyAZTXsjpn0u4oMKU65t-92Nxt6vg3tQecc");
		gapi.client.load("youtube", "v3", function(){
		
		});
	}
 */
 </script>
 
 </body>
 </html>





